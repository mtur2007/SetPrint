 ## [ demo ]
---
# SetPrint(ver, 0.3.0) - 高次元データを簡単に整形・表示！

## <> 2D/NumPy配列や画像データも適切に整形可能なデータ可視化ツール <>

>> デモ版 : ver 0.3.0 [ PlaneView 搭載版 ]<br>https://github.com/mtur2007/SetPrint/blob/main/Development_files/update_0_3_d/demo_setprint_0_3_0.py

---
setprint は、Python標準の pprint を拡張し、リストや辞書だけでなく、<br>
NumPy配列や2Dデータ（画像データ含む）も適切に整形できる 強力なデータ整形ツールです。<br>
特に、配列の欠落や次元違いが発生しているデータの視認性を向上 させ、デバッグを容易にする機能を備えています。<br>

> #### アップデート情報<br>https://github.com/mtur2007/SetPrint/blob/main/Development_files/update_0_3_d/SetPrint_update_image.md

<br>

---

## ✅ `setprint` の特長<br>

 - #### 配列の欠落や次元の違いを自動調整

    pprint では見逃しやすい「格納バグ」や「異なる次元のデータの混在」を、一目で判別できるように整形。<br>
    データが欠けている部分を自動で空白で埋める ため、データの不整合がすぐに分かる。
    
<br>
    
 - #### `2D配列`(画像データ・バイナリデータなど) のように想定された配列の構造を維持して整形表示が可能。

    pprint では整形に難がある 多次元を経由した`2D配列` を適切に整形可能で、<br>
    縦と横方向の２方向を有効活用した、直感的でスマートな整形を実現。

     > #### 識字プログラムの実例<br>https://github.com/mtur2007/SetPrint/blob/main/Development_files/format_data/y_x_yf_f.txt

<br>

 - #### 配列の格納関係をコンパクトに表現

    親要素と子要素のような関係を ブランケット:[]/()/{} ではなく<br>
    線 (┣ :┃:┗ ), ( ┳ : ━ : ┓) で表現し、繋がりを明確にします。
    
    ```txt
    親要素 
      ┣━━ 兄要素
      ┃     ┣━━ 子要素
      ┃     ┗━━ 子要素
      ┗━━ 兄要素
            ┣━━ 子要素
            ┗━━ 子要素
    ```

    ```txt
    親要素 ━━┳━━━━━━━━━━━┓
          兄要素       兄要素
            ┣━━ 子要素   ┣━━ 子要素
            ┗━━ 子要素   ┗━━ 子要素
    ```
<br>

- [アップデート予定]

  > #### インデックスの表示機能を追加予定 で、データ構造の関係性をより明確に把握可能に。
  
  > #### 格納情報の変換機能（特定の値のマッピング） により、データ変換処理を容易に。

<br>

---

## 🛠 `setprint` の活用例


<div style="margin-left: 20px;">

🔹 カラー画像データの格納バグの検出

<div style="margin-left: 20px;">

📌 異なる次元のデータが混在している場合（RGB画像とグレースケール画像の混在）

```python
import numpy as np
from setprint import setprint

data = [
    np.random.randint(0, 256, (3, 3, 3)),  # RGB画像 (3x3x3)
    np.random.randint(0, 256, (3, 3)),  # グレースケール画像 (3x3) → ここだけ次元が異なる
    np.random.randint(0, 256, (3, 3, 3)),  # RGB画像 (3x3x3)
    None  # データの欠落
]

setprint(data)
```
</div>

<br>

🔹 setprint の出力（イメージ）

<div style="margin-left: 20px;">

```txt
keep_settings
['y', 'yf', 'f', 'f']
--------------------------------------------------------------------------------------------

***** 
  ┣━━ ::::::::: 
  ┃       ┣━━━━ ::::::::: ::::::::: 225 255 254 :::::::::  43  83 126 ::::::::: 115 202 184 
  ┃       ┣━━━━ ::::::::: ::::::::: 165 211  89 :::::::::   7  77  15 ::::::::: 211 139  86 
  ┃       ┗━━━━ ::::::::: ::::::::: 106  90 201 ::::::::: 195 231  12 ::::::::: 141  80 108 
  ┣━━ ::::::::: 
  ┃       ┣━━━━ :::::::::       182                   214                    60 
  ┃       ┣━━━━ :::::::::       157                    46                    12 
  ┃       ┗━━━━ :::::::::       120                   118                   150 
  ┣━━ ::::::::: 
  ┃       ┣━━━━ ::::::::: :::::::::   8 118 213 ::::::::: 180 137 207 :::::::::  35  97  16 
  ┃       ┣━━━━ ::::::::: ::::::::: 186 195 195 ::::::::: 116  34   5 ::::::::: 188  12 226 
  ┃       ┗━━━━ ::::::::: ::::::::: 205  34  69 ::::::::: 228  77  59 :::::::::  38  82 232 
  ┗━━      None 

--------------------------------------------------------------------------------------------

```

✅ 次元の違い（3D vs 2D）や欠落が視覚的に明確に<br>
✅ どこが異常なのか、即座に把握できるのでデバッグが容易

</div>

<br>

🔹 pprint の出力

<div style="margin-left: 20px;">

```python
[array([[[ 57, 233, 198],
         [122, 193,  78],
         [ 87,  68,  15]],

        [[ 21,  45,  99],
         [154, 214, 132],
         [243, 128,  56]],

        [[ 72,  94,  45],
         [187,  29,  67],
         [124, 232, 190]]]),

 array([[ 58, 167, 205],
        [134,  77,  49],
        [ 72,  98,  36]]),

 array([[[201,  86,  52],
         [ 27, 123, 111],
         [ 78, 239, 194]],

        [[ 94, 208, 193],
         [234,  98,  72],
         [ 43,  57,  65]],

        [[  9,  14, 186],
         [  8, 129, 244],
         [168,  55, 210]]]),

 None]
```

</div>
</div>
<br>

## メソッド

- ## `set_list` メソッド

    SetPrintクラスのset_listメソッドは、多次元リストや複雑なデータ構造を簡単に整列し、<br>
    視覚的にわかりやすい形式で出力する機能を提供します。<br>
    このメソッドを使用することで、データの次元に応じた最適な整形が可能です。<br>

   - #### 引数

        - **`route`** (bool or str): ルート表示を有効にするかどうか。
            - `True`の場合、格納関係を表した線も同時に出力します。
              <br>※`maintenance`(str)の場合、メンテナンス用の表記になり、ルート表示の有効、無効の結果が同時に出力されます。

        - **`keep_setting`** { `dict`_type } ( deep/`int` : direction/`str` ): 次元毎に展開する方向を指定します。
            - { 1:'y', 3:'x', 4:'yf', 100:None } 次元指定は昇降順で指定し、指定のない次元は親次元の設定が反映されます。
            - ※全ての次元を選択する機能は現在ないので、最後に最大の次元数を指定し,Noneとしてください。

   - #### 戻り値
        
        - `format_texts` : 整形後のテキスト情報が各行毎に格納されたリスト。

    <br>

    - ### **雛形の実行例**

        ```python
        from demo_setprint_0_3_0 import SetPrint
        
        #                整形したい配列を指定
        #                        ∨
        list_data   = SetPrint(datas)
        
        #           '''  展開したい方向を指定
        #                 (以下で詳しく説明)
        #                        ∨         '''
        keep_settings = {1:'x',3:'yf',100:'y'}

        # 整形の実行
        format_texts = list_data.set_collection ( route=True, keep_settings=keep_settings )

        # 結果の非表示、テキストファイルへの書き込み
        with open('output.txt','w') as f:
            for line in format_texts:
                    f.write(line+'\n')

        ```
    
    <br><br>

    ---
    ## [] keep_settingとデータ整列の関係

    <br>
    keep_settingは、各次元の表示方向を指定でき、データの構造や用途に応じた柔軟な表示が可能です。<br>
    以下に、keep_settingの値による動作の違いと、適したデータ形式を説明します。
    <br>

    <br>

    - ## **推奨設定例**
       
        # 1. **`x`**

        **用途**:
        - 次元要素毎に配列の次元の合致を把握したい場合
        - x方向の並行要素で配列の順序の合致を把握したい次元要素。
        
        **影響**: x方向の展開により、y方向の並行配列となります。

        **動作**: 指定した次元を`X方向に展開`する。

        <br>
        
        - **配列例**
            ```python 
            test_data = [
                'a','b','c'
            ]
            ```

        - **整形結果**
            ```plaintext
            with_route    / out_put
            ============= ~ -------------

             ***** ┳━┳━┓  :  ***** 
                   a b c  :        a b c 

            ============= ~ -------------
            ```

        - **設定例**
            ```python
            keep_settings = {1:'x'}
            ```
        <br>
        
        ---
        <br>

        # 2. **`y`**
        
        **用途**: 
        - 次元要素毎に配列の順序の合致を把握したい場合
        - y方向の並行要素で配列の次元の合致を把握したい次元要素。

        **影響**: y方向の展開により、x方向の並行配列となります。

        **動作**: 指定した次元を`y方向に展開`する。
        
        <br>
        
        - **配列例**

            ```python 
            test_data = [
                'a','b','c'
            ]
            ```

        - **整形結果**
            ```plaintext
            with_route  / out_put
            =========== ~ -----------

             *****      :  ***** 
               ┣━━ a    :        a 
               ┣━━ b    :        b 
               ┗━━ c    :        c 

            =========== ~ -----------
            ```

        - **設定例**
            ```python
            keep_settings = {1:'y'}
            ```
        <br>
        
        ---
        <br>

        # 3. **`yf`** ( y_flat )

        **用途**: 指定した次元の配列をy方向に展開し、x方向の並行配列として、<br>   　　  `順序の合致`(欠落)と`次元の合致`(次元違い)を１行で簡潔にまとめて表示させたい場合。<br>
        
        **動作**: 指定した次元をy方向に展開し、以降の範囲内にある次元は同じ行にX方向への展開として追加表示される。<br>

        > 写真データなどの格納情報が密集している配列情報をコンパクトに整列させる場合に最適な設定。
        
        <br>
        

        - **配列例**
            ```python
            test_data = [
                [[1,2,3], [4,5,6]],
                [[7,8,9], [10,11,12]]
            ]
            ```

        - **整形結果**
            ```plaintext
            with_route                               / out_put
            ======================================== ~ ----------------------------------------

             *****                                   :  ***** 
               ┣━━ ::::: ::::: 1 2 3 :::::  4  5  6  :        ::::: ::::: 1 2 3 :::::  4  5  6 
               ┗━━ ::::: ::::: 7 8 9 ::::: 10 11 12  :        ::::: ::::: 7 8 9 ::::: 10 11 12 

            ======================================== ~ ----------------------------------------
            ```

        - **設定例**
            ```python
            keep_settings = {1:'yf',2:'f',3:'f'}
            ```

        <br>

    ---

    ## [] 並行配列
    
    SetPrintでは配列の整形の一環として<br>
    「格納バグ」や「異なる次元のデータの混在」を、一目で判別できるように、<br>
    各方向の`並行要素`と比較して、データが欠けている部分を自動で空白で埋めるという機能があります。
    
    具体的には `y軸` と `x軸` の重複によって表現されます。

    - テスト配列     
        ```
        keep_settings
        ['x', 'y', 'x', 'x']
        --------------------------------------------------------------

           ►list ━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
                 ►list                       ►list 
                   ┣━━ ►list ┳━━━┳━━━━━━━┓     ┣━━ ►list ┳━━━┳━━━━━━━┓
                   ┃         0 ►list ┳━┓ 0     ┃         1 ►list ┳━┓ 1 
                   ┃                 0 0       ┃                 1 1 
                   ┗━━ ►list ┳━━━┳━━━━━━━┳━┓   ┗━━ ►list ┳━━━┳━━━━━━━┳━┓
                             0   0       0 0             1   1       1 1 

        --------------------------------------------------------------
        ```

    - ## x 軸 - 配列の `順序の合致`
        ```
                   .     .   .   .   ⌄ ⌄ . .   .     .   .   .   ⌄ ⌄ . .
                                     ┋ ┋                         ┋ ┋
           ►list ──┬─────────────────┋─┋───────┐                 ┋ ┋
                 ►list               ┋ ┋     ►list               ┋ ┋
                   ├── ►list ┬───┬───┋─┋─┐     ├── ►list ┬───┬───┋─┋─┐
                   │         0 ►list ┬─┐ 0     │         1 ►list ┬─┐ 1 
                   │                 0 0       │                 1 1 
                   └── ►list ┬───┬───┋─┋─┬─┐   └── ►list ┬───┬───┋─┋─┬─┐
                             0   0   ┋ ┋ 0 0             1   1   ┋ ┋ 1 1 
                                     X X                         X X
                                     ^ ^                         ^ ^
        ```
        配列に格納されている値が横に表示されますが、<br>
        `y方向` に展開されている並行な配列の `順序` との整合性を維持する為、<br>
        想定されていない異常な配列や、部分的な空間があった場合、把握しやすくなります。

         ※ `f`の場合は次元が異なっても範囲内の次元までは1行で表示されるため、次元違いも把握可能


    - ## y 軸 - 配列の `次元の合致`
        ```
           ►list ──┬───────────────────────────┐
        .        ►list                       ►list 
        =          ├── ►list ┬───┬───────┐     ├── ►list ┬───┬───────┐
        .          │         0 ►list ┬─┐ 0     │         1 ►list ┬─┐ 1 
        > ┉┉┉┉┉┉┉┉┉┉┉┉┉┉┉┉┉┉ X ┉┉┉┉┉ 0 0 X ┉┉┉┉┉┉┉┉┉┉┉┉┉ X ┉┉┉┉┉ 1 1 X ┉┉┉ <
        =          └── ►list ┬───┬───────┬─┐   └── ►list ┬───┬───────┬─┐
        .                    0   0       0 0             1   1       1 1 
        ```
        
        配列の次元に応じて縦に表示されますが、<br>
        `x方向` に展開されている並行な配列の `次元` との整合性を維持する為、<br>
        想定されていない異常な配列や、部分的な空間があった場合、把握しやすくなります。

        #### ※ 設定値がyの場合、y軸が意味するのは次元ではなく並行的な意味として扱われています。
        - 補足 / y軸が表す意味は２種類存在しています。<br>
            - `次元の違い`( . ) : この意味での改行は次元毎の改行で自動で行われるものとなり、<br>
            - `並行要素`( = ) : (設定値'y')のような手段で改行されるものは並行要素となります。

    ### ※ 並行要素との比較は直近の並行要素の展開方向の整合性が取られる為、<br>　 垂直な方向の整合性は並行要素単位でのものとなります。
