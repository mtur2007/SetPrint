# SetPrint 実装項目メモ

| バージョン | シーケンス型 | マッピング型 | 数列での整形 | 表示スタイル<br>カスタマイズ | 処理の効率化<br>[ × < △ < ⚪︎] | pick_guideprint |
|:--------:|:----------:|:----------:|:-------:|:------------------------:|:----------:|:-:|
|   0.0.0  |     ⚪     |     ×     　|    ×    |       ×                 |      ×     |⚪︎|
|   0.1.0  |     ⚪     |     ×     　|    ×    |       ×                 |      △     |⚪︎|
|   0.2.0  |     ⚪     |     ×     　|    ×    |      ⚪                 |      △     |⚪︎|
|   デモ    |     ⚪     |     ⚪︎      |    ×    |      ⚪︎                 |      △ 　　|⚪︎|
|0.3.0(予定)|     ⚪     |     ⚪      |    ⚪︎    |      ⚪                 |      △ 　　|⚪︎|

### デモ版 : ver 0.3.0<br> https://github.com/mtur2007/SetPrint/blob/main/setprint_update/demo_setprint_0_3_0.py
---
<br><br>

---
# ver 0.2.0 新規機能/修正
- `set_list`

   <新規>
   - 処理状況を簡易的なプログレスバーで表現<br>
   - 自動でリストを整形する機能の追加などのkeep機能の引数拡張<br>
   - 表示スタイルのカスタマイズ性の拡張<br>
   - タプル型への対応

- `pick_guideprint`

   <修正>
   - 表示バグの解消
   ---

- ## ver 0.2.2 修正
- `set_list`

   <修正>
   - プログレスバーや、スタイル設定の格納状況を 表示/非表示:on.off の指定<br>
     { ======= } on / off

   - スタイル設定値の表示時の可読性向上
   ---


<br><br>
---
# {開発中...} ver 0.3.0 実装項目
### デモ版 : ver 0.3.0<br> https://github.com/mtur2007/SetPrint/blob/main/setprint_update/demo_setprint_0_3_0.py

- `set_list`

   <新規>
   - [未完成] 数値を値で整える機能の追加

   - [完成]　 辞書型への対応

   - [完成] 辞書型に対応した次元要素の差分表示 ({),<>,(},//,``)
   
   <修正>
   - [完成] 表示スタイルのカスタマイズ性の拡張(辞書型項目の追加)<br>

---

## 詳細な変更要素

- ### 表示スタイルの詳細と変更
    #### set_listで表現される特殊な要素をまとめた表<br>
    (記号の部分はデフォルトです)
    
    | スタイル名      | 用途      | タイプ     　| 記号/数値<br>(変更可能) | 説明　            | 指定制限             |
    |:-------------:|:----------|:-----------|:-------------|--------------------------|---------------------|
    | "Collections" | image     | list       | '►list'      | 配列の格納を表す            | type: str           |
    |    ``         | ``        | tuple      | '▷tuple'     | ``                       | type: str,          |
    |    ``         | ``        | ndarray    | '>ndarray'   | ``                       | type: str,          |
    |    ``         | ``        | dict　　　  | '◆dict'      | ``                       | type: str,          |
    | ------------- | --------  | ---------  | ----------   | ------------------------ | ------------------- |
    | "bracket"     | partially | list       | '{' ・ ")"   | 他の配列と違う次元要素       | type: str, len: 0<l |
    |    ``         | ``        | tuple      | '<' ・ ">'   | ``                       | type: str, len: 0<l |
    |    ``         | ``        | ndarray    | '(' ・ "}'   | ``                       | type: str, len: 0<l |
    |    ``         | ``        | dict       | '/' ・ "/'   | ``                       | type: str, len: 0<l |
    |    ``         | ``        | None       | '`' ・ "``"  | 存在しない次元要素　　       | type: str, len: l=1 |
    | ------------- | --------  | ---------  | ----------   | ------------------------ | ------------------- |
    | "padding"     | style     |            | ' '          | 字数の穴埋め               | type: str, len: l=1 |
    | ------------- | --------  | ---------  | ----------   | ------------------------ | ------------------- |
    | "empty"       | style     | value      | '-'          | 存在しない要素　　          | type: str, len: l=1 |
    |    ``         | ``        | key        | '*'          | 存在しない辞書要素(key)　   | type: str, len: l=1 |
    | ------------- | --------  | ---------  | ----------   | ------------------------ | ------------------- |
    | "settings"    | print     |            | True         | スタイル設定値の表示,非表示　 | type: bool          |
    | "progress"    | print     |            | True         | プログレスバーの表示,非表示　 | type: bool          |
    | ``            | len       |            | int: 20      | プログレスバーの長さ　     　| type: int, num: 0<n |
    
    **`set_text_style`**

    スタイル変更として'記号'の部分を変更することができます。
    - **実行例**
        ```python
        #list_data = SetPrint(list)
            
        arguments = (

          (("Collections" ,
            {  'image'   : { 'list'    : '►list' ,
                             'tuple'   : '▷tuple' ,
                             'ndarray' : '>nadarray' ,
                             'dict'    : '◆dect' }}),

           ("bracket"     ,
            { 'partially': { 'list'    : ( '{' , ')' ),
                             'tuple'   : ( '<' , '>' ),
                             'ndarray' : ( '(' , '}' ),
                             'dict'    : ( '{' , ')' ),
                             'None'    : ( '`' , '`' )}}),

           ("padding"     , {  'key'   : (' ', ':') , 'value'  : ' ' }),
           ("empty"       , {  'key'   : ('*', ' ') , 'value'  : '-' }),


           ("settings"    , { 'print'  : True }),
           ("progress"    , { 'print'  : False  ,
                              'len'    : 20  }))
        )
        
        list_data.set_text_style(arguments) # set_listの前

        # インデックスで引数のチェックを行う為、この配列の通りに指定してください。
        # 制限の範囲内ではなかった値は表示され、デフォルトの値が代入されます。
        
        # set_datas = list_data.set_list(guide=True, keep_start=1, keep_range='all')
        ```

- ### 辞書型_整形イメージ
    格納例_python
    ```python
    # データの作成
    test_data = (
        [0.0, 0.1, 0.2],
        {zero: 0, one: 1, two: 2},
        {zero: 0, frst: {zero: 0, one: 1}, second:2}
    )

    # インスタンスを生成
    list_data = SetPrint(test_data)

    # データの整形
    set_datas = list_data.set_list(guide=True,keep_start=1,keep_range='all')

    # 表示
    for line in set_datas:
        print(line[-1])
    ```
    整形結果_txtfile
    ```
    =========================================================================
     {} | {n}                                                               |
        |-------------------------------------------------------------------|
        :                                                                   :
        |  ►list [ ****  0.0 ****  0.2   ` -------  ------ ` ******  0.2 ]  |
        |  ◆dict { zero: 0    one: 1     ` -------  ------ `    two: 2   }  |
        |  ◆dict { zero: 0   frst: ◆dict / zero: 0, one: 1 / second: 2   }  |

    =========================================================================
    ```

---
<br><br>

## set_listメソッド処理関係表

```python
'''
set_listメソッドで呼び出される関数
'''
[→:_]...通常の関数
[↺:_]...再帰関数
[_:n]...関数の番号

# [→:0] リストを整型する際の条件を整理 / １次元目の格納情報を整形
    set_list
# [↺:1] マッピング型を調べる
    search_mapping
# [↺:2] シーケンス型を調べる
    search_sequence
# [→:3] キープデータの初期化/作成
    keep_setup
# [→:4] キープデータの整形
    format_keep_data

'''
(P:n)... search_ mapping,sequence 関数内の重要箇所

      | [  [ →:0 ]  [ ↺:1 ]  [  ↺:2 ] ] |
-----------------------------------------
(P:0) : [  [ 724 ]  [ 888 ]  [ 1055 ] ] : キープ無しでブロック化
(P:1) : [  [ 716 ]  [ 877 ]  [ 1044 ] ] : キープブロック化 (キープデータの初期化)
(P:2) : [  [ --- ]  [ 794 ]  [  962 ] ] : キープブロック化 (キープデータへ格納情報を格納)
       ※ test_setprint_0_3_0での場所(行数)
'''
```
<br>

---

#### keep_start : 'False'
```
    [→:0]
     ˅ ^
     │ └────────────────────────────┐
     └───╦════════════════════════ [↺:(1,2)]
         ╠═ « 単独でブロック化(P:0) « ═╣
         ╚═ » 単独でブロック化(P:0) » ═╝
```
<br>

#### keep_strat : 1 == n
```
    [→:0]────── > キープブロック化(P:1) ───[→:3] ▶ [→:4]
                                          ˅
                                          │
                                          └─ < [↺:(1,2)]«═══════╗ ━━━━━━━━━━━ < ━━━━━━━━━━━┓
                                                ╠═ » flat(P:2) ═╝                          ^
                                                ┗━ > キープ範囲外のデータは単独でブロック化(P:0) ━┛
```
<br>

#### keep_strat : 1 < n
```
    [→:0]
     ˅ ^ 1次元毎
     │ └───────┐
     └───── [↺:(1,2)]<━━━━━━━━━━━━━━━━┓───────────────┐
             ┡━ > 単独でブロック化(P:0) ━┛               ^
             └─ > キープブロック化(P:1) ───[→:3] ▶ [→:4]─┘
                                          ˅ 
                                          │
                                          └─ < [↺:(1,2)]«═══════╗ ━━━━━━━━━━━ < ━━━━━━━━━━━┓
                                                ╠═ » flat(P:2) ═╝                          ^
                                                ┗━ > キープ範囲外のデータは単独でブロック化(P:0) ━┛
```
```

    [→:0]
     ˅ ^
     │ └───────┐
     └─╦═══ [↺:(1,2)]
       ╚═════╝ 単独でブロック化(P:0)
```

```
˅ ^
│ └─────────────────────────┐
└─╦═══════════════════ [↺:(1,2)]
  ║                     ║   ┗━━━━━━━━━━━━━━┓ ベースケース到達 / アンワインド開始 (for:0の箇所まで戻る)
  ║　　　              (if:0)━ > (P:0) ━━━━━┫
  ║                     ║               flat(P:2)
  ║                   ( ⤹   ↰  / for:0 ) ━┛
  ║                     ║    ┃
  ╚══ flat(P:2) « ════(if:1) ┗━━━━━━━━━━━━━━ < ━━━━━━━━━━━━━━┓　　　　　　　　　　　　　　　　　　　
                        ┃                                    ^
                        ┗ > int,str型の場合、格納情報を取得する　━┛

(if :0) 値がキープ範囲内か[True:下 False:右]
(if :1) 値が配列型(list,tuple,ndarray,dict)か[True:下 False:左]
(for:0) 配列をforで回す[else:右]
        アンワインドが開始され戻ってきた場合は、残りの配列の処理を行う

« ベースケース到達 / アンワインド開始 (for:0の箇所まで戻る)
> キープ範囲外のデータは単独でブロック化(P:0)
```

```
- 処理の多さ(一般的なデータ時)

    ─ < ━━ < ════

- 関数の 入出力/接合部 の意味合い
  * | 関数呼び出し ; 引数を渡す
  + | 関数の処理　 : 実行始め
  - | 関数の処理　 : 処理し終えた値
  / | 関数呼び出し ; 戻り値の返却
  
  ++| 関数呼び出し後の処理

        /
    *[_:n]++
      + -

- for構文(可変的な入れ子状ではない繰り返し)
  for x in (n)

   [→:n]            |  [→:n]         
    ˅ ^             |   ˅ ^          
    │ └──────┐      |   │ └─(戻り値)─┐   
    └───── [_:n2]   |   └─(引数)── [_:n2]

- 再帰関数(可変的な入れ子状の繰り返し)
  for x in (for y in (for z in(.....)))

    ┌──────────── [↺:(1,2)]
    │              ˅   ^ 
    │              │   │
    │  ┌──── < ───(if) │
    ├─ > 再帰の戻り ─│───┘
    └── 再帰の進行 <─┘


    ┌────── > ───── [↺:(1,2)] ┐
    │                ˅   ^    │
    ^                │   │    │
    └─ 再帰の進行 < ─(if)  │    │
       ┌─── < ───────┘   │    │
       > 再帰の戻り ───────┘    │
       └──────────────────────┘

    ┌──────────── [↺:(1,2)]
    │              ˅   ^ 
    │              │   │
    ├─ > 再帰の戻り ─│───┘
    │  └──── < ───(if)
    └── 再帰の進行 <─┘


    ┏━━━━━ > ━━━━ [↺:(1,2)]
    ┃              ┠── « ベースケース到達 / アンワインド開始
    ^              ˅
    ┡━ 再帰の進行 < ━┩
    └─ __________ ─┘

    ┌─────---──── [↺:(1,2)]
    │              ˅
    │              ┡━━ « ベースケース到達 / アンワインド開始
    ├─ 再帰の進行 < ─┤
    └─ __________ ─┘

    ┌─────---──── [↺:(1,2)]
    │              ^
    │              ┡━━ « ベースケース到達 / アンワインド開始
    ├─ __________ ─┤
    └─ > 再帰の戻り ─┘

    ┏━━━━━ < ━━━━ [↺:(1,2)]
    ┃              ^ 
    ˅              ┠── « ベースケース到達 / アンワインド開始
    ┠─ __________ ─┨
    ┗━ > 再帰の戻り ━┛


- if構文(条件分岐)
  if ___

   [_:n]<────────┐  |  [_:n]<────────────────┐
    ├ > [_:n2] ──┤  |   └─(引数)─┬ > 1 [_:n2]─┤
    └ > (P:n) ───┘  |           └ > 2 (P:n) ─┘
```
```

    ┌──────────── [↺:(1,2)]
    │              │
    │             (if)──────── « ベースケース到達 / アンワインド開始
    │              │           │
    │            ( ⤹ ↰ / for )─┘
    │              │
    ├─ 再帰の進行 < ─┤
    └─ > 再帰の戻り ─┘

    ┌──────────── [↺:(1,2)]
    │              │
    │             (if)──────── « ベースケース到達 / アンワインド開始
    │              │           │
    │            ( ⤹ ↰ / for )─┘
    │              │
    ┡━ 再帰の進行 < ━┩
    └─ > 再帰の戻り ─┘

˅ ^
│ └─────────────────────────┐
└─╦═══════════════════ [↺:(1,2)]
  ║                     ╟━━━━━━━━━━━━━━━━━ « ベースケース到達 / アンワインド開始 (for:0の箇所まで戻る)
  ║　　　              (if:0)━ > (P:0) ━━━━━┫
  ║                     ║                  ^
  ║                   ( ⤹   ↰  /  for:0 ) ━┛
  ║                     ║    ┃
  ╠━━ flat(P:2) « ━━╦═(if:1) ┗━━━━━━━━━━━━━━ < ━━━━━━━━━━━━━━┓　　　　　　　　　　　　　　　　　　　
  ╚━━ » flat(P:2) ━━╝   ┃                                    ^
                        ┗ > int,str型の場合、格納情報を取得する　━┛

˅ ^
│ └─────────────────────────┐
└─┬─────────────────── [↺:(1,2)]
  │                     ╟━━━━━━━━━━━━━━━━━ « ベースケース到達 / アンワインド開始 (for:0の箇所まで戻る)
  │　　　              (if:0)━ > (P:0) ━━━━━┫
  │                     ║                  ^
  │                   ( ⤹   ↰  /  for:0 ) ━┛
  │                     ║    ┃
  ├── flat(P:2) « ━━╦═(if:1) ┗━━━━━━━━━━━━━━ < ━━━━━━━━━━━━━━┓　　　　　　　　　　　　　　　　　　　
  └━━ » flat(P:2) ━━╝   ┃                                    ^
                        ┗ > int,str型の場合、格納情報を取得する　━┛
```